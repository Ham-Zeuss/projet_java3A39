<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
      spacing="20" fx:controller="org.example.UserController" styleClass="root">

    <Label text="Gestion des Utilisateurs" styleClass="title"/>

    <HBox spacing="30">
        <!-- Partie gauche - Formulaire -->
        <VBox spacing="15" styleClass="card">
            <Label text="Formulaire Utilisateur" styleClass="subtitle"/>

            <GridPane hgap="10" vgap="12">
                <!-- Nom -->
                <Label text="Nom :" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="nomField" promptText="Entrez le nom" styleClass="text-field" GridPane.rowIndex="0"
                           GridPane.columnIndex="1"/>
                <Label fx:id="nomError" styleClass="error-label" GridPane.rowIndex="0" GridPane.columnIndex="2"/>

                <!-- Prénom -->
                <Label text="Prénom :" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="prenomField" promptText="Entrez le prénom" styleClass="text-field"
                           GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                <Label fx:id="prenomError" styleClass="error-label" GridPane.rowIndex="1" GridPane.columnIndex="2"/>

                <!-- Email -->
                <Label text="Email :" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="emailField" promptText="Entrez l'email" styleClass="text-field" GridPane.rowIndex="2"
                           GridPane.columnIndex="1"/>
                <Label fx:id="emailError" styleClass="error-label" GridPane.rowIndex="2" GridPane.columnIndex="2"/>

                <!-- Mot de passe -->
                <Label text="Mot de passe :" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <PasswordField fx:id="passwordField" promptText="Entrez le mot de passe" styleClass="text-field"
                               GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                <Label fx:id="passwordError" styleClass="error-label" GridPane.rowIndex="3" GridPane.columnIndex="2"/>

                <!-- Confirmation mot de passe -->
                <Label text="Confirmer :" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <PasswordField fx:id="confirmPasswordField" promptText="Confirmez le mot de passe"
                               styleClass="text-field" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                <Label fx:id="confirmPasswordError" styleClass="error-label" GridPane.rowIndex="4"
                       GridPane.columnIndex="2"/>

                <!-- Rôles -->
                <Label text="Rôles :" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                <ListView fx:id="rolesList" prefHeight="100" prefWidth="200" GridPane.rowIndex="5"
                          GridPane.columnIndex="1">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="ROLE_ADMIN"/>
                            <String fx:value="ROLE_USER"/>
                            <String fx:value="ROLE_GUEST"/>
                        </FXCollections>
                    </items>
                </ListView>
                <Label fx:id="rolesError" styleClass="error-label" GridPane.rowIndex="5" GridPane.columnIndex="2"/>

                <!-- Actif -->
                <Label text="Actif :" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                <CheckBox fx:id="activeCheckBox" selected="true" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
            </GridPane>

            <!-- Boutons d'actions -->
            <HBox spacing="10">
                <Button fx:id="addButton" text="Ajouter" onAction="#handleAddUser" styleClass="btn-success"/>
                <Button fx:id="updateButton" text="Modifier" onAction="#handleUpdateUser"
                        styleClass="btn-primary"/>
                <Button text="Supprimer" onAction="#handleDeleteUser" styleClass="btn-danger"/>
                <Button text="Effacer" onAction="#handleClearForm" styleClass="btn-secondary"/>
            </HBox>
        </VBox>

        <!-- Partie droite - Tableau -->
        <VBox spacing="10">
            <TableView fx:id="userTable" prefHeight="500" prefWidth="700" styleClass="table-view">
                <columns>
                    <TableColumn fx:id="idColumn" text="ID" prefWidth="50"/>
                    <TableColumn fx:id="nomColumn" text="Nom" prefWidth="120"/>
                    <TableColumn fx:id="prenomColumn" text="Prénom" prefWidth="120"/>
                    <TableColumn fx:id="emailColumn" text="Email" prefWidth="180"/>
                    <TableColumn fx:id="rolesColumn" text="Rôles" prefWidth="180"/>
                    <TableColumn fx:id="activeColumn" text="Actif" prefWidth="50"/>
                </columns>
            </TableView>
        </VBox>
    </HBox>
</VBox>